<!--pages/personCenter/myOrder/index.wxml-->
<!--pages/case/scrollList/index.wxml-->
<!-- 我的订单 -->
<view class="myCoupon">
  <!-- 滚动菜单 -->
  <scroll-view class="scroll_list" scroll-x="true" scroll-left="{{scrollWidth * scrollIndex }}">
      <view class="scroll_item" style="color: {{scrollIndex == i ? '#00AA88' : ''}}"  
        wx:for="{{orderType}}" wx:for-index="i"  wx:key="i" wx:for-item="items" data-index="{{i}}" bindtap='changeNav' >
        {{items.text}}
      </view>
      <text class="scroll_line" style="left:{{scrollWidth * scrollIndex}}px"></text>
  </scroll-view>

  <!-- 上拉加载更多 -->
  <scroll-view class="order_list" scroll-y='true' style="height:{{windowHeight}}px" bindscrolltolower="getData">
    <!-- 我的订单 -->
    <view class="ft24">
      <!-- 订单列表 -->
      <view class="item bg_fff mb20" wx:for="{{orderList}}" wx:for-index="index"  wx:key="index" wx:for-item="items">
        <view class="jub_jub line_height80 pr20 pl20 border_bottom_1">
          <view><text>订单号：</text><text>{{items.orderCode}}</text></view>
          <view><text class="color_999 ft20" >{{items.orderTime}}</text></view>
        </view>
        <view class="line_height60 pr20 pl20 border_bottom_1" wx:if="{{items.isCombination != 0}}">组合包</view>

        <!-- 商家商品列表 -->
        <view class="item_list" wx:for="{{items.orderItem}}" wx:for-index="index2"  wx:key="index2" wx:for-item="item">
          <view class="jub_jub line_height60 pr20 pl20 border_bottom_1">
            <view><text>子订单号：</text><text>{{ item.itemCode }}</text></view>
            <view><text class="color_999 ft22">{{ item.itemName }}</text></view>
          </view>

          <!-- 商品列表 -->
          <view class="child_list jub_jub pr20 ml20 border_bottom_1"
           wx:for="{{item.childItem}}" wx:for-index="index3"  wx:key="index3" wx:for-item="child">
            <view  style="width:160rpx;height:220rpx;position:relative;">
              <view class='block_middle_center img_middle_center border_1' style="width:160rpx;height:160rpx;overflow:hidden;">
                <image mode='widthFix' class="" style="width:160rpx;height:160rpx;" src="{{child.productProfileUrl}}"></image>
              </view>
            </view>
            <view class="child_content"  style="width:520rpx;">
              <view class="pt30" style="height:130rpx;"> {{child.name}}</view>
              <view class="jub_jub">
                <text class="color_red">￥  {{ child.price }}</text>
                <text class="color_999">X {{child.num}}</text>
              </view>
            </view>
          </view>

        </view>

        <!-- 金额 -->
        <view class="jub_jub line_height80 pr20 pl20 border_bottom_1">
          <view></view>
          <view>实付： <text class="color_red">￥ {{ items.orderPayAmount }}</text>  </view>
        </view>

        <!-- 订单操作 -->
        <view class="jub_jub line_height80 pr20 pl20">
          <view class="color_666"> {{ orderType[ items.orderStatus2 ].text }} </view>

          <!-- 去支付 待支付 -->
          <view wx:if="{{--items.orderStatus == 0}}"> 
            <text class="btn_default mr20" data-orderCode="{{items.orderCode}}" bindtap='cancelOrderItem'>取消支付</text>
            <text class="btn_title" data-orderCode="{{items.orderCode}}" bindtap='goPay'>去支付</text>
          </view>

          <!-- 重新购买 交易取消或交易关闭 -->
          <view wx:if="{{items.orderStatus == 4 || items.orderStatus == 5 }}"> 
            <text class="btn_default mr20" data-orderCode="{{items.orderCode}}" bindtap='deleteOrderItem'>删除订单</text>
            <text class="btn_title" data-orderCode="{{items.orderCode}}" bindtap='againBuy'>重新购买</text>
          </view>

          <!-- 评价(0)/换货(1)/查看物流(2) -->
          <view wx:if="{{ items.returnLogisticsShow || items.returnCommentShow }}">

              <!-- 换货 只要是实质商品都有换货-->
              <text class="btn_default mr20" data-orderCode="{{items.orderCode}}" 
              wx:if="{{ items.returnLogisticsShow }}" bindtap='cancelOrderItem'>查看换货</text>

              <!-- 评价 普通商品交易成功，每个都有评价-->
              <text class="btn_default mr20" data-orderCode="{{items.orderCode}}" 
              wx:if="{{ items.returnCommentShow }}" bindtap='cancelOrderItem'>待评价</text>

               <!-- 物流 只要是实质商品都有物流 (orderCode, trackNo, productProfileUrl, productPirce, productNun)-->
              <text class="btn_default" wx:if="{{ items.returnLogisticsShow }}">查看物流</text>

          </view>

        </view>

      </view>

    </view>

    <view style="padding-top:300rpx; text-align:center; color:#999;" wx:if="{{courseData.length == 0}}">
        <image style="width:250rpx;" mode='widthFix' src="../../../images/image/not_have.png" alt=""></image>
        <view>暂无订单</view>
    </view>
  </scroll-view>
</view>

