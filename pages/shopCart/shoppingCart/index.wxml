<!--pages/shopCart/shoppingCart/index.wxml-->
<!-- 我的购物车 -->
<view>

  <!-- 购物车头部 -->
  <view class="cart_top fixed_top jub_jub line_height100 bg_fff w_100" >
    <view class="pl20 pr20">共4门课程</view>
    <view class="color_red pl20 pr20">删除选中</view>
  </view>

  <!-- 购物车列表 -->
  <view class="cart_list" >
    <view  class="mt30 bg_fff" v-for="(items,index1) in cartList" :key="index1" >

      <!-- 单个商品 -->
      <view  v-if="items.itemType == '1'">
        <view class="jub_jub pr20 pl20 border_bottom_1px">
          <view>
            <van-checkbox v-model="items.itemState"   bindtap="checkboxChange(index1)" >{{items.itemTitle}}</van-checkbox>
          </view>
          <view> 
            <view class="delete_btn"  bindtap="deleteAllItem">删除</view>
          </view>
        </view>
        <view  class="items_list">
          <view  class="pl20" v-for="(item,index2) in items.items" :key="index2">
            <view class="content jub_jub border_bottom_1px" style="position:relative;">
                <view class="item table_block">
                    <view class="td_block"><van-checkbox v-model="item.state" bindtap="checkboxChange(index1, index2)"></van-checkbox></view>
                    <view class="td_block pl30">
                        <view class="img_middle_center img_box border_1px">
                            <image :src="item.imgSrc" alt=""></image>
                        </view>
                    </view>
                    <view class="td_block pl30 ">
                        <p  class="" style="word-wrap:break-word;">
                            <view style="position:relative;top:-60rpx;">{{item.productKeyWord}}</view>
                            <view class="ft26" style="position:absolute;top:150rpx;left:260rpx;color:red;">￥{{item.price}}</view>
                        </p>
                    </view>
                </view>
                <view class="item table_block">
                    <view class="pr20" style="position:absolute;top:1.2rem;right:0">
                        <van-stepper v-model="item.num" integer  bindtap="calculatePrice" />
                    </view>
                </view>
              </view>
            </view>
          </view>
        <view class="items_total flex flex_end pr20 pl20">
        <view >小计：￥{{items.itemTotal}}</view>
        </view>
      </view>

      <!-- 组合包商品 -->
      <view v-else>
        <view class="header jub_jub pr20 pl20 border_bottom_1px">
          <view>
            <van-checkbox v-model="items.itemState"   bindtap="checkboxChange(index1)" >组合包 {{items.itemTitle}} </van-checkbox>
          </view>
          <view>
            <view class="delete_btn"  bindtap="deleteItem(items.cartId)">删除</view>
          </view>
        </view>
      <!-- 平台遍历 -->
      <view v-for="(item,index2) in items.items" :key="index2">
        <view class="ml20 line_height80 border_bottom_1px">{{item.itemTitle}}</view>
          <view  class="items_list">
            <view  class="pl20" v-for="(child,index3) in item.items" :key="index3">
                <view class="content jub_jub border_bottom_1px" style="position:relative;">
                    <view class="item table_block">
                        <view class="td_block" style="width:20px;">&nbsp;</view>
                        <view class="td_block pl30">
                            <view class="img_middle_center img_box border_1">
                                <image :src="child.imgSrc" alt=""  ></image>
                            </view>
                        </view>
                        <view class="td_block pl30 ">
                            <view  class="" style="word-wrap:break-word;">
                                <view style="position:relative;top:-60rpx;">{{item.productKeyWord}}</view>
                                <view class="font_26" style="position:absolute;top:150rpx;left:260rpx;color:red;">￥{{child.price}}</view>
                            </view>
                        </view>
                    </view>
                    <view class="item table_block">
                        <view class="pr20 color_cart_ccc1" style="position:absolute;top:150rpx;right:50rpx">
                            X {{child.num}}
                        </view>
                    </view>
                </view>
            </view>
          </view>
        </view>  

        <view class="items_total flex flex_end pr20 pl20">
          <view >小计：￥{{items.itemTotal}}</view>
        </view>
      </view>

    </view>
  </view>

  <!-- 购物车底部 -->
  <view class="cart_bottom jub_jub line_height90 bg_fff w_100" style="position:fixed;bottom:1px;">
    <view class="pr20 pl20">
      <van-checkbox value="{{ listState }}" bind:change="setAllCheckboxChange" checked-color="#00aa88" ></van-checkbox>
    </view>
    <view class="jub_jub">
      <view class="text-right pt10 pr20" >
        <view class="ft30" style="line-height:40rpx;">实付金额： <text class="color_red">￥{{listTotal}}</text> </view>
        <view class="ft20 color_aaa" style="line-height:30rpx;">若购买享有优惠，相应金额将在订单结算页面扣减</view>
      </view>
      <view class="color_fff bg_00aa88 text-center ft30" style="width:180rpx;">去结算</view>
    </view>
  </view>

</view>
